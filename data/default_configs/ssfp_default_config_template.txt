# IMPORTANT NOTE: gbe interfaces and their VLANs have to be configured with
# "allow-hotplug" and "auto" stanzas. This fix is required to avoid race
# conditions between interface's network configuration and MAC
# address configuration processes.
#
# Example:
#
# auto gbe0.102
# allow-hotplug gbe0.102
# iface gbe0.102 inet static
#         address.192.168.100.200
#         netmask 255.255.255.240
#
# IMPORTANT NOTE: Use "auto" stanza for bridge interfaces. To create it on
# system startup.
# It is very important to use "wait-for-mac $iface" as a bridge pre-up script.
#
# Example:
#
# auto br0
# iface br0 inet manual
#         bridge_ports gbe0 gbe1
#         brigge_stp off
#         hwaddress ether 00:21:ce:50:FF:2a
#         pre-up wait-for-mac gbe0 && wait-for-mac gbe1
#
# br0 in this example has to wait for gbe0 and gbe1 to be ready.
# It is required to avoid using gbe ports by a bridge until they a properly
# configured with MAC address.

auto gbe0
allow-hotplug gbe0
iface gbe0 inet static
	address 192.168.1.1
	netmask 255.255.255.0

auto gbe1
allow-hotplug gbe1
iface gbe1 inet static
	address 192.168.2.1
	netmask 255.255.255.0

#VLAN 4050 mngmt
auto gbe1.4050
allow-hotplug gbe1.4050
iface gbe1.4050 inet static
        address {{ ip }}
        netmask 255.255.255.0
        gateway {{ gw }}

